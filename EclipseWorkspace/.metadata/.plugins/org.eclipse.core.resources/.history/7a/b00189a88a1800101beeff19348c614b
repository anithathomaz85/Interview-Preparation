package gts;

public class Q028_Q20_Singleton {

	private static Q020_Q28_Singleton mySingletonInstance = null;

	private Q020_Q28_Singleton() {
		System.out.println("From Singleton private constructor");
	}

// Synchronized is to ensure only one thread to access this method at a single point of time.
	public synchronized static Q020_Q28_Singleton getInstance() {

		if (mySingletonInstance == null) {
			mySingletonInstance = new Q020_Q28_Singleton();
		}
		return mySingletonInstance;
	}

	@Override
	protected Object clone() throws CloneNotSupportedException {

		System.out.println("inside clone method");
		return new CloneNotSupportedException("Cloning of singleton class not allowed.");
	}

	public static void main(String[] args) throws CloneNotSupportedException {

		System.out.println("Main method " + Thread.currentThread().getName());
		Q020_Q28_Singleton singleton = Q020_Q28_Singleton.getInstance();
		System.out.println(singleton);

		Q020_Q28_Singleton singleton2 = Q020_Q28_Singleton.getInstance();
		System.out.println(singleton2);

		singleton.clone();

		System.out.println("Main method" + Thread.currentThread().getName());

	}

}
